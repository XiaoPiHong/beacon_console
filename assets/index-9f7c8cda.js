import{j,c as ge,a as fe,b as _e,d as ye,_ as be,m as D,e as k,i as F,f as Ie,r as p,C as Pe,u as C,s as x,g as ve,h as L,k as $,M as Ee,l as J,T as W,$ as ke,n as Te,N as Se,K as we,U as Re,L as Oe,o as Ce,B as X,p as xe,I as Le,q as Ne,t as q,v as Ae,w as Z,X as Q,x as Y,y as Me,z,S as je,A as B,D as $e,O as Be,E as Ue,P as Ve,F as De,G as Fe}from"./vendor-f9d4d912.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();const qe=j.Fragment,s=j.jsx,E=j.jsxs;var b=(n=>(n.LOGIN="LOGIN",n.SET_USERINFO="SET_USERINFO",n.SET_PERMISSION="SET_PERMISSION",n))(b||{});const ze={userInfo:null,permission:[]},Ke=(n=ze,t)=>{const{type:e,payload:o}=t;switch(e){case b.LOGIN:return{...n,...o};case b.SET_USERINFO:return{...n,userInfo:o};case b.SET_PERMISSION:return{...n,permission:o};default:return n}},Ge=ge({user:Ke}),He=fe(Ge,_e(ye(be)));function Je(n,t){return D(k(n),t,(e,o)=>{if(F(e)&&F(o))return D(k(e),o,(r,a)=>Ie(r)?r.concat(a):void 0)})}const ee=n=>n.replace(/^\//,"").replace(/\/:[^/]+/g,""),S=getComputedStyle(document.documentElement),We=n=>n.replace(/([A-Z])/g,"-$1").toLowerCase(),Xe={borderRadius:0},ne={token:{...Xe,colorPrimary:S.getPropertyValue("--color-primary"),colorLink:S.getPropertyValue("--color-link"),menuColor:S.getPropertyValue("--menu-color"),menuHoverBg:S.getPropertyValue("--menu-hover-bg")}},Ze=p.createContext({theme:k(ne),updateTheme:()=>{}}),Qe=({children:n})=>{const[t,e]=p.useState(k(ne)),o=a=>{Object.keys(a).forEach(i=>{Object.prototype.toString.call(a[i])==="[object Object]"?o(a[i]):document.documentElement.style.setProperty(`--${We(i)}`,a[i])})},r=(a={})=>{e(i=>({...Je(i,a)})),o(a)};return s(Ze.Provider,{value:{theme:t,updateTheme:r},children:s(Pe,{theme:t,children:n})})},Ye="modulepreload",en=function(n){return"/beacon_console/"+n},K={},f=function(t,e,o){if(!e||e.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(e.map(a=>{if(a=en(a),a in K)return;K[a]=!0;const i=a.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(!!o)for(let m=r.length-1;m>=0;m--){const u=r[m];if(u.href===a&&(!i||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":Ye,i||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),i)return new Promise((m,u)=>{d.addEventListener("load",m),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})},w={"app-container":"_app-container_113qc_1","app-container__header":"_app-container__header_113qc_10","app-container__tabs":"_app-container__tabs_113qc_14","app-container__main":"_app-container__main_113qc_18"},R={"header-container":"_header-container_8s36g_1","header-container-logo":"_header-container-logo_8s36g_7","header-container-menu":"_header-container-menu_8s36g_11","header-container-setting":"_header-container-setting_8s36g_16"},nn=(n,t,e)=>{const{idKey:o,parentIdKey:r,formatNode:a=c=>c}=e,i=(c,l)=>{const d=[];for(let m=0,u=l.length;m<u;m++){const h=l[m],g=h[r],y=h[o];if(g===c){const I={id:y,data:h,children:i(y,l)};d.push(a(I))}}return d};return i(n,t)},tn=({data:n,children:t})=>({...n,children:t}),te=(n,t=null,e)=>n.map(o=>{const r={...o,url:t?`${t.url+o.permissionCode}`:o.permissionCode};return r.children=te(o.children,r,e),e?e(r):r});function oe({formatNode:n,includeButton:t=!1,filterUnShowRoute:e=!0}){const{permission:o}=C(c=>({permission:c.user.permission}),x),r=c=>{let l=!0;return t||(l=l&&c.type==="ROUTE"),e&&(l=l&&c.show===!0),l},a=k(o.filter(c=>r(c)));return{menu:te(nn(null,a,{idKey:"permissionId",parentIdKey:"parentPermissionId",formatNode:c=>tn(c)}),null,n)}}const re=p.createContext({routes:[],routerMetas:[]}),on=({routerMetas:n,routes:t})=>{const e=ve(t);return s(re.Provider,{value:{routerMetas:n,routes:t},children:e})},U=()=>p.useContext(re),rn=()=>{const n=L(),t=$(),{routerMetas:e}=U(),{menu:o}=oe({formatNode:({permissionId:i,url:c,permissionName:l,children:d})=>({key:c,label:l,url:c,children:d.length?d:void 0})}),r=()=>e.find(c=>J(c.url,t.pathname)),a=i=>{const{props:{url:c}}=i.item;n(c)};return s(Ee,{id:"menu",selectedKeys:[r().url],onSelect:a,mode:"horizontal",items:o})},sn=()=>E("div",{className:R["header-container"],children:[s("div",{className:R["header-container-logo"]}),s("div",{className:R["header-container-menu"],children:s(rn,{})}),s("div",{className:R["header-container-setting"]})]}),an=({aliveRef:n})=>{const t=L(),e=Symbol("tab"),o=$(),{routerMetas:r}=U(),{permission:a}=C(u=>({permission:u.user.permission}),x);let i=`${e.description}/home`;const c=p.useRef(new Map([[`${e.description}/home`,{url:"/home",meta:{title:"首页",closable:!1},children:[]}]])),l=()=>{if(a.length){const u=r.find(g=>J(g.url,o.pathname)),h=`${e.description}${o.pathname}`;c.current.set(h,u),i=h}},d=u=>{t(u.split(`${e.description}`)[1])},m=(u,h)=>{var g;if(h==="remove"){c.current.delete(u),(g=n.current)==null||g.removeCache(u.split(`${e.description}`)[1]);const y=Array.from(c.current),I=y[y.length-1][0];t(I.split(`${e.description}`)[1])}};return l(),p.useEffect(()=>()=>{c.current.clear()},[]),s(W,{activeKey:i,type:"editable-card",hideAdd:!0,items:Array.from(c.current).map(u=>({key:u[0],label:u[1].meta.title,closable:u[1].meta.closable,children:null})),onChange:d,onEdit:m})},cn=({children:n})=>n,A=()=>{console.log("layout");const{routes:n}=U(),{pathname:t}=$(),e=ke(),[o,r]=p.useState(0),a=Te();p.useEffect(()=>{r(o+1)},[n]);const i=p.useMemo(()=>o===0?1:o,[o]);return E("div",{className:w["app-container"],children:[s("div",{className:w["app-container__header"],children:s(sn,{})}),s("div",{className:w["app-container__tabs"],children:s(an,{aliveRef:e})}),s("div",{className:w["app-container__main"],children:s(cn,{children:s(Se,{aliveRef:e,activeName:t,cache:!0,children:a},i)})})]})},se=()=>{const n={table:{rowSelection:{type:"checkbox"},fullHeight:!0,columns:[{title:"姓名",dataIndex:"name",key:"name",cellFunc:[{component:"link",componentProps:{url:"https://www.taobao.com"}}]},{title:"地址",dataIndex:"address",key:"address"},{title:"年龄",dataIndex:"age",key:"age",cellFunc:({record:e})=>[{component:"link",componentProps:{url:"https://www.baidu.com"}},{component:"link",componentProps:{onClick:()=>{window.open("https://www.jd.com/")}}}]},{title:"操作",dataIndex:"actions",cellFunc:({record:e})=>[{component:"actions",componentProps:{type:"dashed",max:1,items:[{key:"add",component:"Button",componentProps:{children:"我是按钮",onClick:o=>{console.log(o)}}},{key:"more",component:"Dropdown",componentProps:{children:"我是下拉",dropDownItems:[{key:"1",label:"我是下拉1"},{key:"2",label:"我是下拉2"}],onClick:o=>{console.log(o)}}},{key:"render",render:s("div",{children:"我是自定义render"})}]}}]}],autoPagination:!0,api:async e=>(console.log(e),new Promise(o=>{setTimeout(()=>{o([{key:"1",name:"胡彦斌",age:32,address:"西湖区湖底公园1号"},{key:"2",name:"李雷",age:28,address:"东城区东华门大街2号"},{key:"3",name:"韩梅梅",age:30,address:"南山区南山路3号"},{key:"4",name:"王小明",age:25,address:"北城区北门大街4号"},{key:"5",name:"赵丽颖",age:29,address:"中城区中山路5号"},{key:"6",name:"陈晓",age:31,address:"西湖区湖底公园6号"},{key:"7",name:"刘亦菲",age:27,address:"东城区东华门大街7号"},{key:"8",name:"张三",age:33,address:"南山区南山路8号"},{key:"9",name:"李四",age:26,address:"北城区北门大街9号"},{key:"10",name:"王五",age:35,address:"中城区中山路10号"},{key:"11",name:"赵六",age:34,address:"西湖区湖底公园11号"},{key:"12",name:"孙七",age:28,address:"东城区东华门大街12号"},{key:"13",name:"周八",age:29,address:"南山区南山路13号"},{key:"14",name:"吴九",age:31,address:"北城区北门大街14号"},{key:"15",name:"郑十",age:27,address:"中城区中山路15号"},{key:"16",name:"何十一",age:30,address:"西湖区湖底公园16号"},{key:"17",name:"冯十二",age:33,address:"东城区东华门大街17号"},{key:"18",name:"褚十三",age:32,address:"南山区南山路18号"},{key:"19",name:"卫十四",age:29,address:"北城区北门大街19号"},{key:"20",name:"蒋十五",age:28,address:"中城区中山路20号"},{key:"21",name:"沈十六",age:31,address:"西湖区湖底公园21号"},{key:"22",name:"韩十七",age:34,address:"东城区东华门大街22号"},{key:"23",name:"杨十八",age:27,address:"南山区南山路23号"},{key:"24",name:"朱十九",age:30,address:"北城区北门大街24号"},{key:"25",name:"秦二十",age:33,address:"中城区中山路25号"},{key:"26",name:"尤二一",age:32,address:"西湖区湖底公园26号"},{key:"27",name:"许二二",age:29,address:"东城区东华门大街27号"},{key:"28",name:"何二三",age:28,address:"南山区南山路28号"},{key:"29",name:"吕二四",age:31,address:"北城区北门大街29号"},{key:"30",name:"施二五",age:34,address:"中城区中山路30号"}])},2e3)})),toolbar:{type:"primary",max:2,items:[{key:"add",component:"Button",componentProps:{children:"我是按钮",onClick:e=>{console.log(e)}}},{key:"more",component:"Dropdown",componentProps:{children:"我是下拉",dropDownItems:[{key:"1",label:"我是下拉1"},{key:"2",label:"我是下拉2"}],onClick:e=>{console.log(e)}}},{key:"render",render:s("div",{children:"我是自定义render"})}]}},searchForm:{colProps:{span:6},collapsible:!0,items:[{name:"Button",label:"弹窗",component:"Button",componentProps:{children:"点击打开表格弹窗",onClick:e=>{var o;console.log(t.current),(o=t.current)==null||o.open()}}},{name:"Input",label:"Input",component:"Input",required:!0,initialValue:"Input",componentProps:{onChange:e=>{console.log(e)}},ifShow:({model:e})=>e.Input2==="Input1"},{name:"Input2",label:"Input",component:"Input",required:!0,initialValue:"Input",componentProps:{onChange:e=>{console.log(e)}}},{name:"Input3",label:"Input",component:"Input",required:!0,initialValue:"Input",componentProps:{onChange:e=>{console.log(e)}}},{name:"Input4",label:"Input",component:"Input",required:!0,initialValue:"Input",componentProps:{onChange:e=>{console.log(e)}}},{name:"Input5",label:"Input",component:"Input",required:!0,initialValue:"Input",componentProps:{onChange:e=>{console.log(e)}}},{name:"Input6",label:"Input",component:"Input",required:!0,initialValue:"Input",componentProps:{onChange:e=>{console.log(e)}}}]},crudFormDialog:{title:"弹窗",mask:!0,formProps:{items:[{name:"Input",label:"Input",component:"Input",required:!0,initialValue:"Input",componentProps:{onChange:e=>{console.log(e)}},colProps:{span:12}},{name:"Select",label:"Select",component:"Select",required:!0,componentProps:{options:[{label:"Option1",value:"Option1"},{label:"Option2",value:"Option2"}],onChange:e=>{console.log(e)}},colProps:{span:12}}]},onOk:()=>{var e;console.log("onOk"),(e=t.current)==null||e.validator()},onCancel:()=>{var e;console.log("onCancel"),(e=t.current)==null||e.close()}}},t=p.useRef(null);return s("section",{style:{padding:"8px",height:"100%"},children:s(we,{ref:t,...n,onRowSelectionChange:(e,o)=>{console.log(e,o)}})})},ln=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),un="_page_1x1ij_1",dn="_login_1x1ij_6",mn="_login__header_1x1ij_10",pn="_login__body_1x1ij_22",P={page:un,login:dn,login__header:mn,"login__header-title":"_login__header-title_1x1ij_13","login__header-description":"_login__header-description_1x1ij_17",login__body:pn},ae=({methods:n,loading:t,onClickLoginBtn:e})=>({items:[{name:"username",label:"",component:"Input",required:!0,initialValue:"xph-admin",componentProps:{prefix:s(Re,{}),placeholder:"用户名"}},{name:"password",label:"",component:"InputPassword",required:!0,initialValue:"Admin@1234",componentProps:{prefix:s(Oe,{}),placeholder:"密码"}},{name:"remember",label:"",initialValue:!1,valuePropName:"checked",render:({model:o})=>E("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s(Ce,{checked:o.remember,onChange:r=>{n.setFieldsValue({remember:r.target.checked})},children:"记住账号"}),s(X,{type:"link",children:"忘记密码"})]})},{name:"submit",label:"",component:"Button",componentProps:{type:"primary",children:"登录",style:{width:"100%"},loading:t,onClick:e}}]}),ie=({loading:n,countDown:t,onClickLoginBtn:e,onClickGetCodeBtn:o})=>({items:[{name:"email",label:"",component:"Input",required:!0,componentProps:{prefix:s(xe,{}),placeholder:"邮箱"},rules:[{type:"email",message:"请输入正确的邮箱"}]},{name:"emailCode",label:"",required:!0,render:({model:r})=>E("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"8px"},children:[s(Le,{placeholder:"邮箱验证码"}),s(X,{disabled:t<60,onClick:o,type:"primary",children:t<60?t:"获取验证码"})]})},{name:"submit",label:"",component:"Button",componentProps:{type:"primary",children:"登录",style:{width:"100%"},loading:n,onClick:e}}]}),hn=Object.freeze(Object.defineProperty({__proto__:null,getAccountLoginFormProps:ae,getEmailLoginFormProps:ie},Symbol.toStringTag,{value:"Module"})),G=new Map([["JSON",{get:n=>JSON.parse(n),set:n=>JSON.stringify(n)}]]);function gn(n){return function(t,e){return{get(){let o=n.getItem(t);if(typeof e<"u"){const r=G.get(e);r&&(o=r.get(o))}return o},set(o){if(typeof e<"u"){const r=G.get(e);r&&(o=r.set(o))}return n.setItem(t,o)},remove:()=>n.removeItem(t)}}}const H=gn(localStorage),_={accessToken:H("accessToken"),refreshToken:H("refreshToken")},fn=(n,t)=>{const e=document.createElement("a");e.href=n,e.download=t,e.click()},{VITE_BASE_API_URL:_n}={VITE_BASE_API_URL:"",VITE_BASE:"/beacon_console/",VITE_ROUTER_BASENAME:"/beacon_console",BASE_URL:"/beacon_console/",MODE:"gh-pages",DEV:!1,PROD:!0,SSR:!1};function yn(n){let{url:t,method:e,query:o,headers:r={},data:a={}}=n;const i=_.accessToken.get();let c;switch(r=new Headers(Ne.merge({"Content-Type":"application/json",authorization:i?`Bearer ${i}`:""},r)),r.get("Content-Type")){case"application/json":["POST","PUT","DELETE"].includes(e)&&(c=JSON.stringify(a));break;case"multipart/form-data":["POST","PUT","DELETE"].includes(e)&&(r.delete("Content-Type"),c=q.stringify(a));break}return fetch(`${_n}${t}${o?`?${q.stringify(o)}`:""}`,{method:e,headers:r,body:c,credentials:"include"}).then(l=>{if(l.ok){const d=l.headers.get("content-type");return d?d.includes("application/json")?l.json().then(m=>{switch(m.code){case 200:return m;case 400:return Promise.reject(new Error(`code：${m.code}，message：${m.message}`));case 401:{_.accessToken.remove(),_.refreshToken.remove(),window.location.href="/login";return}default:return Promise.reject(new Error(`客户端不知道如何处理 code: ${m.code}`))}}):d.includes("application/vnd.ms-excel")?l.blob().then(m=>{var h;const u=window.URL.createObjectURL(m);fn(u,decodeURIComponent(((h=l.headers.get("content-disposition"))==null?void 0:h.split("attachment;filename=")[1])??`${Date.now()}.xlsx`)),window.URL.revokeObjectURL(u)}):Promise.reject(new Error(`客户端不知道如何处理 Content-Type: ${d}`)):Promise.reject(new Error("响应头未找到 Content-Type 字段"))}return Promise.reject(new Error("未知错误"))}).catch(l=>(Ae.error(l.message),Promise.reject(l)))}const v=n=>t=>yn({...t,method:n}),N={get:v("GET"),head:v("HEAD"),put:v("PUT"),post:v("POST"),delete:v("DELETE"),patch:v("PATCH")},bn=n=>N.post({url:"/auth/sign-in-by-username",data:n}),In=n=>N.post({url:"/auth/sign-in-by-email",data:n}),Pn=n=>N.post({url:"/auth/send-mail-for-sign-in",data:n}),vn=()=>N.get({url:"/auth/get-profile"}),V=[{permissionId:"1",permissionName:"首页",permissionCode:"/home",description:"string",type:"ROUTE",show:!0,parentPermissionId:null,closable:!1},{permissionId:"1-1",permissionName:"查看",permissionCode:"view",description:"string",type:"BUTTON",show:!0,parentPermissionId:"1",closable:!0},{permissionId:"3",permissionName:"用户",permissionCode:"/user",description:"string",type:"ROUTE",show:!0,parentPermissionId:null,closable:!0},{permissionId:"3-1",permissionName:"用户管理",permissionCode:"/user",description:"string",type:"ROUTE",show:!0,parentPermissionId:"3",closable:!0},{permissionId:"3-1-1",permissionName:"查看",permissionCode:"view",description:"string",type:"BUTTON",show:!0,parentPermissionId:"3-1",closable:!0}],En=()=>new Promise(n=>{setTimeout(()=>{n(!0)},300)}),kn=n=>bn(n).then(({data:t})=>(_.accessToken.set(t.accessToken),_.refreshToken.set(t.refreshToken),{type:b.LOGIN,payload:{userInfo:t.user,permission:V}})),Tn=n=>In(n).then(({data:t})=>(_.accessToken.set(t.accessToken),_.refreshToken.set(t.refreshToken),{type:b.LOGIN,payload:{userInfo:t.user,permission:V}})),Sn=async()=>{const{data:n}=await vn();return{type:b.SET_USERINFO,payload:n}},wn=async()=>{const n=await En();return console.log(n),{type:b.SET_PERMISSION,payload:V}},Rn=n=>{const t=L(),[e,o]=p.useState(!1),r=()=>{i.validator().then(({password:d,username:m})=>{o(!0);const u=Date.now().toString(),h=Me({length:16,type:"alphanumeric"}),g=z.MD5(`${h}${u}${z.MD5(d)}`).toString();n.loginByUsername({username:m,nonceStr:h,timestamp:u,signature:g}).then(()=>{t("/home")}).finally(()=>{o(!1)})})},[a,i]=Q(),c=ae({methods:i,loading:e,onClickLoginBtn:r}),l=p.useRef(null);return s(Y,{register:a,ref:l,...c})},ce=Z(n=>({user:n.user}),{loginByUsername:kn})(Rn),On=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"})),Cn=n=>{const t=L(),[e,o]=p.useState(!1),[r,a]=p.useState(60),i=p.useRef(r),c=()=>{m.validator(["email"]).then(({email:g})=>{Pn({email:g}).then(y=>{let I=null;I=setInterval(()=>{console.log("定时器"),i.current<=0?(clearInterval(I),I=null,i.current=60,a(60)):(a(he=>he-1),i.current=i.current-1)},1e3)})})},l=()=>{m.validator().then(({email:g,emailCode:y})=>{o(!0),n.loginByEmail({email:g,emailCode:y}).then(()=>{t("/home")}).finally(()=>{o(!1)})})},[d,m]=Q(),u=ie({loading:e,countDown:r,onClickLoginBtn:l,onClickGetCodeBtn:c}),h=p.useRef(null);return s(Y,{register:d,ref:h,...u})},le=Z(n=>({user:n.user}),{loginByEmail:Tn})(Cn),xn=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));function ue(){let n="1";return{tabsActiveKey:n,tabsList:[{key:"1",label:"账号",children:s(ce,{})},{key:"2",label:"邮箱",children:s(le,{})}],onChangeTabs:o=>{n=o}}}const Ln=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),de=()=>{const{tabsActiveKey:n,tabsList:t,onChangeTabs:e}=ue();return s("div",{className:P.page,children:E("div",{className:P.login,children:[E("div",{className:P.login__header,children:[s("div",{className:P["login__header-title"],children:"项目管理系统"}),s("div",{className:P["login__header-description"],children:"项目成功，系统成就"})]}),s("div",{className:P.login__body,children:s(W,{defaultActiveKey:n,items:t,onChange:e})})]})})},Nn=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),An={"loading-container":"_loading-container_u84nk_1"},me=()=>s("div",{className:An["loading-container"],children:s(je,{tip:"玩命加载中",children:s(qe,{})})}),Mn=Object.assign({"../views/error/index.tsx":()=>f(()=>import("./index-f3e89aa5.js"),["assets/index-f3e89aa5.js","assets/vendor-f9d4d912.js"]),"../views/home/index.tsx":()=>f(()=>Promise.resolve().then(()=>ln),void 0),"../views/login/components/account-signin-form.tsx":()=>f(()=>Promise.resolve().then(()=>On),void 0),"../views/login/components/email-signin-form.tsx":()=>f(()=>Promise.resolve().then(()=>xn),void 0),"../views/login/hooks/use-tags.tsx":()=>f(()=>Promise.resolve().then(()=>Ln),void 0),"../views/login/index.tsx":()=>f(()=>Promise.resolve().then(()=>Nn),void 0),"../views/login/indexConfig.tsx":()=>f(()=>Promise.resolve().then(()=>hn),void 0),"../views/system/organizationalStructure/department/index.tsx":()=>f(()=>import("./index-398c597e.js"),["assets/index-398c597e.js","assets/vendor-f9d4d912.js"]),"../views/system/role/index.tsx":()=>f(()=>import("./index-f40936ee.js"),["assets/index-f40936ee.js","assets/vendor-f9d4d912.js"]),"../views/user/user/index.tsx":()=>f(()=>import("./index-5f383d99.js"),["assets/index-5f383d99.js","assets/vendor-f9d4d912.js"])}),T=(n,t)=>{const e=p.lazy(Mn[`../views/${n}/index.tsx`]);return s(p.Suspense,{fallback:s(me,{}),children:s(e,{...t})})},O=({children:n})=>{const t=_.accessToken.get(),{userInfo:e}=C(a=>({userInfo:a.user.userInfo}),x),o=$e(),r=p.lazy(async()=>(t&&!e&&(console.log("触发了刷新"),await Promise.all([Sn(),wn()]).then(([a,i])=>{o(a),o(i)}).catch(()=>({default:()=>T("error",{type:500})}))),{default:t?()=>n:()=>s(B,{to:"/login"})}));return s(p.Suspense,{fallback:s(me,{}),children:s(r,{})})},jn=()=>[{path:"/login",element:_.accessToken.get()?s(B,{replace:!0,to:"/home"}):s(de,{})}],$n=n=>[{path:"/",element:s(B,{to:"/home"})},...n,{path:"/home",element:s(A,{}),children:[{path:"",element:s(O,{children:s(se,{})}),meta:{title:"首页",closable:!1}}]},{path:"*",element:s(A,{}),children:[{path:"*",element:s(O,{children:T("error",{type:404})}),meta:{title:"错误页",closable:!0}}]}],pe=({children:n,url:t,id:e})=>{const{permission:o}=C(c=>({permission:c.user.permission}),x),r=o.find(c=>c.permissionId===e);return o.filter(c=>c.parentPermissionId===(r==null?void 0:r.permissionId)&&c.type==="BUTTON").findIndex(c=>c.permissionCode==="view")!==-1?n:T("error",{type:403})},Bn=(n,t)=>{switch(!!n){case!0:return t.permissionCode.replace(/^\//,"");case!1:return t.permissionCode}},Un=(n,t)=>{const e=!!n,{url:o}=t;switch(e){case!0:return t.children.length?s(Be,{}):s(O,{children:s(pe,{url:o,id:t.permissionId,children:T(ee(o))})});case!1:return s(A,{})}},Vn=(n,t)=>{const e=!!n,{url:o}=t;switch(e){case!0:return M(t.children,t);case!1:return t.children.length?M(t.children,t):[{path:"",element:s(O,{children:s(pe,{url:o,id:t.permissionId,children:T(ee(o))})}),meta:{title:t.permissionName,closable:t.closable}}]}},M=(n,t=null)=>n.map(e=>(e.url=((t==null?void 0:t.url)||"")+e.permissionCode,{path:Bn(t,e),element:Un(t,e),children:Vn(t,e),meta:{title:e.permissionName,closable:e.closable}}));function Dn(){const{menu:n}=oe({filterUnShowRoute:!1}),t=M(n),e=[...jn(),...$n(t)],o=(i,c=null)=>i.map(l=>{if(l.path.includes("*"))return{url:l.children[0].path,children:[],meta:l.children[0].meta||{}};const d=c?`${c.path+(l.path?"/"+l.path:"")}`:l.path,m=o(l.children||[],{...l,path:d});return{url:d,children:m,meta:l.meta||{}}}),r=i=>{const c=[];return i.forEach(l=>{l.children&&l.children.length?c.push(...r(l.children)):c.push({meta:l.meta,url:l.url,children:[]})}),c},a=r(o(e));return{routes:e,routerMetas:a}}const Fn=()=>{const{routes:n,routerMetas:t}=Dn();return s(on,{routerMetas:t,routes:n})},{VITE_ROUTER_BASENAME:qn}={VITE_BASE_API_URL:"",VITE_BASE:"/beacon_console/",VITE_ROUTER_BASENAME:"/beacon_console",BASE_URL:"/beacon_console/",MODE:"gh-pages",DEV:!1,PROD:!0,SSR:!1};Ue.createRoot(document.getElementById("root")).render(s(Qe,{children:s(Ve,{store:He,children:s(De,{basename:qn,children:s(Fe,{value:{extendProps:{dialog:{getPopperContainer:()=>document.getElementsByClassName("cache-component")[0]},table:{table:{responseFields:{list:"data.list",total:"data.total",current:"data.current"}}}}},children:s(Fn,{})})})})}));export{E as a,N as h,s as j};
